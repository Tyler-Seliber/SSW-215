<!DOCTYPE html>

<!--
  Simple Webpage for Food Restaraunt
  Name: Tyler Seliber
  Date: 2/15/2021
  Program of Study: Software Engineering
-->

<html>
  <head>
    <meta charset="utf-8" />
    <title>Pop 70, Stevens Campus</title>
    <link rel="stylesheet" href="styles/style.css" />
  </head>

  <body>
    <h1>Pop 70, Stevens Campus</h1>
    <img src="images/Profile Photo.png" />
    <h4>Bio ~ 5 sentences</h4>

    <h3 id="breakfast-header">Breakfast Menu</h3>
    <table id="breakfast-menu">
      <tr>
        <th>Name</th>
        <th>Price</th>
      </tr>
    </table>
    <button onclick="convertPrice(0)">Dollar to Pound</button>

    <h3 id="lunch-header">Lunch Menu</h3>
    <table id="lunch-menu">
      <tr>
        <th>Name</th>
        <th>Price</th>
      </tr>
    </table>
    <button onclick="convertPrice(1)">Dollar to Pound</button>

    <h3 id="dinner-header">Dinner Menu</h3>
    <table id="dinner-menu">
      <tr>
        <th>Name</th>
        <th>Price</th>
      </tr>
    </table>
    <button onclick="convertPrice(2)">Dollar to Pound</button>

    <h2 id="confirmation-text"></h2>
    <button id="order-button" onclick="placeOrder()">Place Order</button>

    <script>
      function menuItem(itemCategory, itemName, itemPrice) {
        this.category = itemCategory;
        this.name = itemName;
        this.usd = "$" + itemPrice.toFixed(2); // Use toFixed() to truncate prices to 2 decimal places - https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed
        this.pound = "Â£" + (itemPrice * 0.71).toFixed(2);
        this.displayPrice = this.usd;
      }

      var breakfastMenu = document.getElementById("breakfast-menu");
      var lunchMenu = document.getElementById("lunch-menu");
      var dinnerMenu = document.getElementById("dinner-menu");

      var breakfastItems = [
        new menuItem("Breakfast", "Pop Tarts", 2.5),
        new menuItem("Breakfast", "Pop 'n Top Pancakes ", 8.75),
        new menuItem("Breakfast", "Popped Eggs Benedict", 12.6),
        new menuItem(
          "Breakfast",
          "Snap'em, Crack'em, & Pop'em Eggs + Hashbrowns",
          6.0
        ),
      ];
      var lunchItems = [
        new menuItem("Lunch", "Popcorn Chicken", 3.75),
        new menuItem("Lunch", "Pop Up Sandwich", 5.5),
        new menuItem("Lunch", "Jiffy Pop", 2.5),
        new menuItem("Lunch", "Loli a la Pop", 0.75),
      ];
      var dinnerItems = [
        new menuItem("Dinner", "Grill-Popped Steak", 10.45),
        new menuItem("Dinner", "Mixed Greens Salad with Popcorn Chicken", 7.35),
        new menuItem("Dinner", "Soda Pop", 2.00),
        new menuItem("Dinner", "Cake Pop", 3.00),
      ];

      var categoriesArray = [breakfastItems, lunchItems, dinnerItems];

      generateTable(breakfastMenu, breakfastItems);
      generateTable(lunchMenu, lunchItems);
      generateTable(dinnerMenu, dinnerItems);

      //The following code was inspired by https://www.valentinog.com/blog/html-table/
      function generateTable(tableID, itemArray) {
        for (i in itemArray) {
          let row = tableID.insertRow();
          let nameCell = row.insertCell();
          let priceCell = row.insertCell();
          nameCell.appendChild(document.createTextNode(itemArray[i].name));
          priceCell.appendChild(
            document.createTextNode(itemArray[i].displayPrice)
          );
        }
      }

      // David Treder (a CS major) helped guide me toward this algorithm
      function convertPrice(categoryIndex) {
        let categoryItems = categoriesArray[categoryIndex];
        let category = categoryItems[0].category;
        let categoryID = category.toLowerCase() + "-menu";
        var categoryTable = document.getElementById(categoryID);

        // Remove all rows from the table (otherwise the converted prices would be added as additional rows)
        for (i in categoryItems) {
          categoryTable.deleteRow(1);
        }

        for (i in categoryItems) {
          // Check if website currenlt displays price in USD or Pounds, then switches displayPrice to display the other currency.
          if (categoryItems[i].displayPrice === categoryItems[i].usd) {
            categoryItems[i].displayPrice = categoryItems[i].pound;
          } else {
            categoryItems[i].displayPrice = categoryItems[i].usd;
          }
        }
        generateTable(categoryTable, categoryItems);
      }

      function placeOrder() {
        let confirmationText =
          "We've received your order. Your order will be ready for pick up in 5 minutes.";
        document.getElementById(
          "confirmation-text"
        ).innerHTML = confirmationText;

        // Remove place order putton
        document.getElementById("order-button").remove();
      }
    </script>
  </body>
</html>
